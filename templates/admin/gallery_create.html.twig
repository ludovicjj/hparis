{% extends 'admin/base_admin.html.twig' %}
{% form_theme form _self %}
{% use "form/vich_image_widget.html.twig" %}

{% block title %}{{ parent() }}-Galerie{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('admin_gallery_create') }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('admin_gallery_create') }}
{% endblock %}

{% block body %}
    {% set breadcrumb = [{'label': 'Admin','path': '#'},{'label': 'Gallery','path': '#'},{'label': 'Ajouter','path': '#'}] %}

    <div class="page-wrapper">
        {{ include ('partials/_wave_header.html.twig', {
            title : 'Ajouter une galerie',
            description : "Cette page vous permet de créer votre propre galerie.
            Veuillez noter que les champs suivis d'un astérisque (*) sont obligatoires et doivent être remplis pour que la création de la galerie soit possible.
            Pensez à sauvegarder quand vous êtes satisfait !",
            breadcrumbs: [{'label': 'Admin','path': '#'},{'label': 'Gallery','path': '#'},{'label': 'Ajouter','path': '#'}]
        }) }}

        <main class="container pt-4">
            <section class="gallery-action">
                {{ form_start(form, {'attr': {'novalidate': 'novalidate', 'id': 'form-gallery'}}) }}
                <div class="gallery-form-grid mb-3">
                    <div class="grid-item-left">
                        <div class="mb-3 title">
                            {{ form_label(form.title) }}
                            {{ form_widget(form.title) }}
                            {{ form_help(form.title) }}
                            {{ form_errors(form.title) }}
                        </div>
                        <div class="mb-3 category">
                            {{ form_label(form.category) }}
                            {{ form_widget(form.category) }}
                            {{ form_help(form.category) }}
                            {{ form_errors(form.category) }}
                        </div>
                        <div class="mb-3 state">
                            <div class="form-label">Visibilité</div>
                            {{ form_label(form.state) }}
                            {{ form_widget(form.state) }}
                            {{ form_help(form.state) }}
                            {{ form_errors(form.state) }}
                        </div>
                    </div>
                    <div class="grid-item-right">
                        <hr class="border border-1 opacity-50 d-block d-lg-none">
                        <div class="thumbnail target-preview">
                            {% for thumbnail in form.thumbnail.children %}
                                {{ form_label(thumbnail) }}
                                {{ form_widget(thumbnail) }}
                                {{ form_help(thumbnail) }}
                                {{ form_errors(thumbnail) }}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="uploads">
                    {{ form_label(form.uploads) }}
                    <button type="button" id="new-upload" class="btn btn-main btn-sm" data-collection-holder-class="uploads-grid">Ajouter une image</button>
                    <div class="uploads-grid my-3"
                         data-prototype="{{ include("partials/_upload.html.twig", {form: form.uploads.vars.prototype})|e('html_attr') }}"
                         data-index="{{ form.uploads|length > 0 ? form.uploads|last.vars.name + 1 : 0 }}"
                    >
                        <div class="upload-help">
                            <span><i class="fa-regular fa-image"></i></span>
                            <p>Aucune image sélectionnée pour le moment</p>
                        </div>
                    </div>
                </div>
                {{ form_row(form.submit) }}
                {{ form_end(form, {render_rest: false}) }}
            </section>
        </main>
        {{ include('partials/_footer_wave.html.twig') }}
    </div>
{% endblock %}